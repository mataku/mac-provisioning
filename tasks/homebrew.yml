---

- name: Update homebrew
  homebrew: update_homebrew=yes upgrade_all=yes

- name: Tap Homebrew repositories
  homebrew_tap: tap={{ item }}
  with_items:
    - caskroom/cask
    - caskroom/versions
    - homebrew/dupes
    - homebrew/python
    - homebrew/science
    - homebrew/versions
    - neovim/neovim
    - sanemat/font
    - supermomonga/splhack

- name: Install Homebrew packages
  homebrew: name={{ item.name }} install_options={{ item.options | default() }}
  with_items:
    - { name: gcc }
    - { name: app-engine-python }
    - { name: fontforge }
    - { name: freetype }
    - { name: fontconfig }
    - { name: ghostscript }
    - { name: git, options: with-brewed-curl with-brewed-openssl}
    #- { name: gnuplot }
    - { name: go }
    - { name: grep }
    - { name: heroku-toolbelt }
    - { name: imagemagick }
    - { name: less }
    - { name: lua }
    - { name: mecab }
    - { name: mecab-ipadic }
    - { name: mysql }
    - { name: nkf }
    - { name: nodebrew }
    - { name: pandoc }
    - { name: peco }
    - { name: python3 }
    - { name: pypy3 }
    - { name: pyenv }
    - { name: neovim, options: HEAD }
    - { name: rbenv }
    - { name: readline }
    - { name: ricty, options: [powerline,vim-powerline] }
    - { name: ruby-build }
    - { name: ruby }
    - { name: source-highlight }
    - { name: tidy-html5 }
    - { name: tig }
    - { name: tree }
    - { name: vim, options: [with-lua,with-python3,override-system-vi]}
    - { name: zsh, options: without-etcdir }
    - { name: zsh-completions }

- name: noti 
  shell: osascript -e 'display notification "Start installing cask packages!" with title "Finished Homebrew packages!"'

- name: Install homebrew cask packages
  homebrew_cask: name={{ item.name }}
  with_items:
    - { name: android-studio }
    - { name: atom }
    # - { name: basictex }
    - { name: caffeine}
    - { name: github-desktop }
    - { name: google-chrome }
    - { name: google-japanese-ime }
    - { name: iterm2 }
    - { name: java }
    - { name: java7 }
    - { name: karabiner }
    - { name: otto }
    - { name: onyx}
    - { name: prott}
    - { name: skim }
    - { name: slack }
    - { name: visual-studio-code }
    - { name: xquartz }

- name: sudo notification
  shell: osascript -e 'display notification "enter password...." with title "Application requires"'

- name: install homebrew cask packages (with sudo)
  homebrew_cask: name={{ item.name }}
  with_items:
    - { name: virtualbox }
    - { name: vagrant }
    - { name: dockertoolbox }
